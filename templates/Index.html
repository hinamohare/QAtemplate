<!DOCTYPE html>
<html>
<title>Quality Assurance Platform</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="../static/styles/demo_style.css" rel="stylesheet" type="text/css"/>
<!-- https://github.com/mstratman/jQuery-Smart-Wizard/blob/master/README.md -->
<link href="../static/styles/smart_wizard.css" rel="stylesheet" type="text/css"/>
<link href="../static/styles/general.css" rel="stylesheet" type="text/css"/>
<!--link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/-->
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<link rel="stylesheet" href="../static/kendo/styles/kendo.common.min.css"/>
<link rel="stylesheet" href="../static/kendo/styles/kendo.default.min.css"/>
<link rel="stylesheet" href="../static/kendo/styles/kendo.default.mobile.min.css"/>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<!--script type="text/javascript" src="../static/js/jquery-2.0.0.min.js"></script-->
<script src="../static/kendo/js/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type='text/javascript' src='../static/js/knockout-3.4.2.js'></script>

<script type="text/javascript" src="../static/js/model.js"></script>
<script type="text/javascript" src="../static/js/jquery.smartWizard.js"></script>


<script src="../static/kendo/js/kendo.core.min.js"></script>
<script src="../static/kendo/js/kendo.data.min.js"></script>
<script src="../static/kendo/js/kendo.all.min.js"></script>
<script src="../static/js/common.js"></script>
<script src="../static/js/qap.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<!--<script src="https://code.highcharts.com/highcharts.src.js"></script>-->

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript">
    // google.charts.load("current", {packages:["corechart","gauge","table"]});
    // google.charts.setOnLoadCallback(drawGuageChart);


    function initMap() {
        var homeMap = new google.maps.Map(document.getElementById('homeRegionMap'), {
            zoom: 4,
            center: {lat: 37.548839, lng: -122.2597169},
            zoomControl: true,
            scaleControl: true
        });
        var reportMap = new google.maps.Map(document.getElementById('regionMap'), {
            zoom: 4,
            center: {lat: 37.548839, lng: -122.2597169},
            zoomControl: true,
            scaleControl: true
        });
        var neighborhoods = [
            new google.maps.LatLng(52.511467, 13.447179),
            new google.maps.LatLng(51.549061, 13.422975),
            new google.maps.LatLng(51.697622, 13.396110),
            new google.maps.LatLng(52.576683, 13.344393)
        ];
        var markers = [];

        drop(homeMap, neighborhoods, markers);

    }

    // Adds a marker to the map.
    function drop(map, neighborhoods, markers) {
        for (var i = 0; i < neighborhoods.length; i++) {
            markers.push(new google.maps.Marker({position: neighborhoods[i], map: map}));
        }
    }

    // Get the Sidebar
    var mySidebar = document.getElementById("mySidebar");

    // Get the DIV with overlay effect
    var overlayBg = document.getElementById("myOverlay");

    // Toggle between showing and hiding the sidebar, and add overlay effect
    function w3_open() {
        if (mySidebar.style.display === 'block') {
            mySidebar.style.display = 'none';
            overlayBg.style.display = "none";
        } else {
            mySidebar.style.display = 'block';
            overlayBg.style.display = "block";
        }
    }

    // Close the sidebar with the close button
    function w3_close() {
        mySidebar.style.display = "none";
        overlayBg.style.display = "none";
    }
    function showcontent(navitem) {
        if (navitem === 1) {
            $('#homepanel').show();
            $('#searchpanel').hide();
            $('#datainputpanel').hide();
            $('#analysispanel').hide();
            viewModel.SectionName('Dashboard');
        }
        else if (navitem === 2) {
            $('#searchpanel').show();
            $('#homepanel').hide();
            $('#datainputpanel').hide();
            $('#analysispanel').hide();
            viewModel.SectionName('Search');
        }
        else if (navitem === 3) {
            $('#datainputpanel').show();
            $('#searchpanel').hide();
            $('#homepanel').hide();
            $('#analysispanel').hide();
            viewModel.SectionName('Data Input');
        }
        else if (navitem === 4) {
            $('#searchpanel').hide();
            $('#homepanel').hide();
            $('#datainputpanel').hide();
            $('#analysispanel').show();
            viewModel.SectionName('Analysis & Report');
        }
        else {
            $('#homepanel').show();
        }


    }
 function showValidationType(type) {
            if(type === "ToolBased")
            {
                $('#secModelBasedType').hide();
            }
            else
            {
                $('#secModelBasedType').show();
            }
        }







</script>
<!--script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDOKQ7m8UJHH0nVxIrd6yNFa44oa-iK6tM&callback=initMap"></script-->
<script>
    $(document).ready(function () {


        //$('#modal').modal();
        // Smart Wizard
        $('#wizard').smartWizard({onFinish: onFinishCallback});

        function onFinishCallback(objs, context) {

            if (validateAllSteps()) {

                var data =viewModel.DataInputModel;
                data.Source = viewModel.DiSourceValue();
                //data.CsvFileName= "98723420348.csv",
                //name of file input taken from the server side
                data.CsvFileName=$('#hdnFileName').val()
                data.Region = $("#dropdowndatainputregion").val();
                data.Station = $("#dropdownstation").val();
                if(data.Station == 'Other')
                {
                    data.Station = $('#txtInputOtherStation').val();
                }

                data.FromDate = $("#datepickerdatainputfrom").val();
                data.ToDate = $("#datepickerdatainputto").val();
                data.IsRequiredClean =viewModel.IsRequiredClean();
                data.Parameters.Completeness = viewModel.Completeness();
                data.Parameters.Correctness = viewModel.Correctness();
                data.Parameters.Timeliness = viewModel.Timeliness();
                data.Parameters.Uniqueness = viewModel.Uniqueness();
                data.Parameters.Validity = viewModel.Validity();
                data.Parameters.Consistency = viewModel.Consistency();
                data.Parameters.Reliability = viewModel.Reliability();
                data.Parameters.Usability = viewModel.Usability();
                data.ValidationType = viewModel.ValidationType();
                data.ModelBasedSubType =viewModel.ModelBasedSubType();
                data.MonthlyValidation=viewModel.MonthlyValidation();
                data.MonthStartDate=viewModel.MonthStartDate();
                data.MonthEndDate=viewModel.MonthEndDate();
                data.YearlyValidation=viewModel.YearlyValidation();
                data.StartYear=viewModel.StartYear();
                data.EndYear=viewModel.EndYear();

                data.Model = viewModel.Model();
                console.log(data);
                qap.submitdatainput(data,getsetSearchResult);
               // getsetSearchResult();
                showcontent(4);
                //showMessage();
            }
        }

        // Your Step validation logic
        function validateSteps(stepnumber) {
            var isStepValid = true;
            // validate step 1
            if (stepnumber == 1) {
                // Your step validation logic
                // set isStepValid = false if has errors
            }
            // ...
        }

        function validateAllSteps() {
            var isStepValid = true;
            // all step validation logic
            return isStepValid;
        }

        function showMessage() {
            alert('Hello');
        }

        $("#collectionaccordion").accordion();


        // create a template using the above definition
        var validatedData = qap.getResult();

        var dataSource = new kendo.data.DataSource({
            data: validatedData,
            change: function () { // subscribe to the CHANGE event of the data source
                //$("#validatedResultSet tbody").html(kendo.render(template, this.view())); // populate the table
            }
        });

        // read data from the "movies" array
        dataSource.read();

        var bindResultGrid = function (resultData) {
            var tempDataSource =new kendo.data.DataSource({ data: resultData });

            $("#grid").kendoGrid({
                dataSource: tempDataSource,
                selectable: "row",
                change: function (e) {
                    var selectedRows = this.select();
                    showdashboard(this.dataItem(selectedRows[0]));

                },
                // navigatable: true,
                // navigate: function(e) {
                //   console.log(e.element); // displays the newly highlighted cell
                //  },
                //height: 450,
                groupable: false,
                sortable: true,
                pageable: {
                    refresh: true,
                    pageSizes: true,
                    buttonCount: 5
                },
                columns: [{
                    field: "Region",
                    title: "Region",
                    width: 200
                }, {
                    field: "Station",
                    title: "Station",
                    width: 200
                }, {
                    field: "From",
                    title: "From"
                }, {
                    field: "To",
                    title: "To"
                }, {
                    field: "IsCleaned",
                    title: "Is Cleaned",
                    width: 100
                }, {
                    field: "OverallQuality",
                    width: 120
                },
                {
                    command: [{
                        name: "Analysis",
                        width: 100,
                        click: function(e) {
                            // prevent page scroll position change
                            e.preventDefault();
                            // e.target is the DOM element representing the button
                            var tr = $(e.target).closest("tr"); // get the current table row (tr)
                            // get the data bound to the current table row
                            var data = this.dataItem(tr);
                             var selectedRows = this.select();
                            showdashboard(data);
                            console.log("Details for: " + data.Region);
                        }
                      }]
                }
                ]
            });
        };

        /*Get Region Start*/
        var getregion = function(){
            var regions;
            $.ajax({
                type: "GET",
                url: "/getallregioninfo",
                dataType:"json",
                contentType:"application/json",
                success: function (result) {
                        regions = result.regions;
                        binddatainputregion(regions); //Data input page
                        bindregion(regions); //Search Page
                },
                error: function(){
                    console.log("Error occured while fetching region information")
                }
            });
        };
        /*Get Region End*/

        var bindregion = function (regions) {
              $("#dropdownregion").kendoDropDownList({
                    dataTextField: "RegionName",
                    dataValueField: "RegionName",
                    dataSource: regions,
                    index: 0,
                    change: function(){
                        bindstation(this.dataItem().Stations);
                    },
                    dataBound:function(e){
                        bindstation(this.dataItems()[0].Stations);
                    }
                });
            };


        var binddatainputregion = function (regions) {


            $("#dropdowndatainputregion").kendoDropDownList({
                dataTextField: "RegionName",
                dataValueField: "RegionName",
                dataSource: regions,
                index: 0,
                change: function(){
                        binddatainputstation(this.dataItem().Stations);
                    },
                dataBound:function(e){
                        binddatainputstation(this.dataItems()[0].Stations);
                    }
            });
        };
        var bindstation = function (stations) {
            var regionId = 1;
            //var stations = qap.getStationsByRegionId(regionId);
            $("#dropdownstation").kendoDropDownList({
                dataTextField: "StationName",
                dataValueField: "StationName",
                dataSource: stations,
                index: 0,
                change: function(){
                        showhideOtherStation('dropdownstation','txtOtherStation');
                    },
            });

        };

        var showhideOtherStation=function(drpstation,txtotherstation)
        {
            if( $("#"+drpstation).val() == 'Other')
            {
                $("#"+txtotherstation).show();
            }
            else
            {
                $("#"+txtotherstation).hide();
            }
        }

        var binddatainputstation = function (stations) {
            var regionId = 1;
            //var stations = qap.getStationsByRegionId(regionId);
            $("#dropdowndatainputstation").kendoDropDownList({
                dataTextField: "StationName",
                dataValueField: "StationName",
                dataSource: stations,
                index: 0,
                 change: function(){
                        showhideOtherStation('dropdowndatainputstation','txtInputOtherStation');
                    },

            });
        };


        getregion();
        $("#fromdatepicker").kendoDatePicker();
        $("#todatepicker").kendoDatePicker();
        $("#datepickerdatainputfrom").kendoDatePicker();
        $("#datepickerdatainputto").kendoDatePicker();


        //Knocout Bindings

        ko.applyBindings(viewModel);

        var getsetSearchResult = function(){

        var tempregion = $("#dropdownregion").val();
            var tempstation = $("#dropdownstation").val();
            if(tempstation == 'Other')
            {
                tempstation = $("#txtOtherStation").val();
            }
            viewModel.SearchModel.Region=tempregion;
            viewModel.SearchModel.Station=tempstation;
            viewModel.SearchModel.FromDate=$('#fromdatepicker').val();
            viewModel.SearchModel.ToDate=$('#todatepicker').val();
            var selfQap = qap;
           // var resultdata = selfQap.search(viewModel.SearchModel);
           $.ajax({
                    type:"GET",
                    url:"/search",
                    dataType:"json",
                    //contentType:"application/json",
                    data:viewModel.SearchModel,
                     beforeSend: function(){
                         // Handle the beforeSend event
                         selfQap.showmodal();
                       },
                    success:function(response){
                        if(response.data.found ==='no')
                        {
                            console.log('No Record found');
                            return;
                        }

                    },
                    error:function(response){console.log('There is error while fetching search data')},
                    complete:function(response){
                     selfQap.resultModel = response.responseJSON.data.records;
                     bindResultGrid(selfQap.resultModel);
                    selfQap.hidemodal();

                    }
                });

        };
        $("#btnSearch").on("click", function () {
            getsetSearchResult();

           // qap.hidemodal();
        });

         $('#btncsvfile').change(function () {
        sendFile(this.files[0]);
        //$('#frmcsvfile').submit(function (e) {
            // e.preventDefault();
       // });
    });

    function sendFile(file) {
        var fd = new FormData(document.getElementById("frmcsvfile"));
        $.ajax({
            type: 'post',
            url: '/upload',
            data: fd,
            success: function (data) {
                // do something
                var fname = data.result.filename;
                console.log(fname);
                $('#hdnFileName').val(fname);
            },
             error: function (data) {
                // do something

                $('#hdnFileName').val('error');
            },
            xhrFields: {
                // add listener to XMLHTTPRequest object directly for progress (jquery doesn't have this yet)
                onprogress: function (progress) {
                    // calculate upload progress
                    var percentage = Math.floor((progress.total / progress.totalSize) * 100);
                    // log upload progress to console
                    console.log('progress', percentage);
                    if (percentage === 100) {
                        console.log('DONE!');
                    }
                }
            },
            processData: false,
            contentType: false
        });
        return false;
    }


    showcontent(2); //show default data input. For debug
    });






</script>


<body class="w3-light-orange">

<!-- Top container -->
<div class="w3-bar w3-top w3-blue-grey w3-large " style="z-index:4">

    <div class="w3-left">
        <img src="static/images/qaplogo.png" class="w3-circle " style="width:50px">
    </div>
    <span class="w3-bar-item w3-left">Quality Assurance Platform</span>
</div>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-collapse w3-orange w3-text-white w3-animate-left" style="z-index:3;width:300px;"
     id="mySidebar"><br>
    <div class="w3-container w3-row">

        <div class="w3-col s8 w3-bar">
            <span>Welcome, <strong>Hina</strong></span><br>
            <a href="#" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i></a>
            <a href="#" class="w3-bar-item w3-button"><i class="fa fa-user"></i></a>
            <a href="#" class="w3-bar-item w3-button"><i class="fa fa-cog"></i></a>
        </div>
    </div>
    <hr>
    <div class="w3-container">
        <h5>Menu</h5>
    </div>
    <div class="w3-bar-block">
        <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black"
           onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>� Close Menu</a>

        <a href="#" onclick="showcontent(1);" class="w3-bar-item w3-button w3-padding"><i class="fa fa-home fa-fw"></i>
            Home</a>
        <a href="#" onclick="showcontent(2);" class="w3-bar-item w3-button w3-padding"><i
                class="fa fa-search fa-fw"></i> Search</a>
        <a href="#" onclick="showcontent(3);" class="w3-bar-item w3-button w3-padding"><i
                class="fa fa-database fa-fw"></i> Data Input</a>
        <a href="#" onclick="showcontent(4);" class="w3-bar-item w3-button w3-padding"><i
                class="fa fa-bar-chart fa-fw"></i> Analysis</a>

        <!--<a href="#" class="w3-bar-item w3-button w3-padding"><i class="fa fa-cog fa-fw"></i> Settings</a>
        -->
        <br><br>
    </div>
</nav>


<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer"
     title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div id="main" class="w3-main" style="margin-left:300px;margin-top:43px;">

    <!-- Header-->
    <header class="w3-container w3-grey" style="padding-top:55px">
        <h5><b><i class="fa fa-dashboard"></i> <span data-bind="text: SectionName"></span></b></h5>
    </header>


    <div id="homepanel">
        <div class="w3-panel">
            <div class="w3-row-padding" style="margin:0 -16px">
                <div class="w3-twothird">
                    <h5>Regions</h5>
                    <!--<div id="homeRegionMap" style="width:100%;height:400px;box-sizing: border-box"></div>-->
                    <script src="http://maps.google.com/maps/api/js?sensor=false"
                            type="text/javascript"></script>
                    <div id="homemap" style="width:500px;height:400px"></div>

                    <script type="text/javascript">
    var geolocations = [
                            ['China Camp : San Francisco Bay, CA', 38.0012, -122.4604],
                            ['Soth March : Elkhorn Slogh, CA', 36.8179, -121.7394],
                            ['Azevedo Pond : Elkhorn Slogh, CA', 36.8457, -121.7538],
                            ['Vierra Moth : Elkhorn Slogh, CA', 36.8111, -121.7792],
                            ['North Marsh : Elkhorn Slogh, CA', 36.8346, -121.7384],
                            ['Boca Rio : Tijana River, CA', 32.5595, -117.1288],
                            ['Pond Eleven Restored : Tijana River, CA', 32.59612, -117.11822],
                            ['Soth Bay : Tijana River, CA', 32.600136, -117.115692],
                            ['Oneonta Slogh : Tijana River, CA', 32.56829, -117.13127],
                            ['Elliot Creek : Soth Slogh, OR', 43.296501, -124.310729],
                            ['Charleston Bridge : Soth Slogh, OR', 43.3377, -124.320533],
                            ['Winchester Arm : Soth Slogh, OR', 43.27615, -124.3197528],
                            ['Valino Island : Soth Slogh, OR', 43.317217, -124.321633],
                            ['Bayview Channel : Padilla Bay, WA', 48.496139, -122.502114],
                            ['Ploeg Channel : Padilla Bay, WA', 48.556322, -122.530894],
                            ['Joe Leary Estary : Padilla Bay, WA', 48.518264, -122.474189],
                            ['Seldovia Deep : Kachemak Bay, Alaska', 59.44099, -151.72096],
                            ['Homer Dolphin Deep : Kachemak Bay, Alaska', 59.60201, -151.40878],
                            ['Seldovia Surface : Kachemak Bay, Alaska', 59.44099, -151.72096],
                            ['Homer Surface 3 : Kachemak Bay, Alaska', 59.60205, -151.40942],
                            ['Aransas Bay : Mission Aransas, TX', 27.9798, -97.0287],
                           ['Copano bay East : Mission Aransas, TX', 28.1323, -97.0344],
                           ['Ship Channel : Mission Aransas, TX', 27.83811, -97.05022],
                           ['Mesquite Bay : Mission Aransas, TX', 28.1384, -96.8285],
                           ['Copano Bay West : Mission Aransas, TX', 28.0841, -97.2009],
                           ["Barker's Island : Lake Superior, WI", 46.721772, -92.06352],
                           ['Oliver Bridge : Lake Superior, WI', 46.65685, -92.20166],
                           ['State Route 6 : Old Woman Creek, OH', 41.3825, -82.515],
                           ['Lower Estuary : Old Woman Creek, OH', 41.3819, -82.5142],
                           ['Berlin Road : Old Woman Creek, OH', 41.3483, -82.5083],
                           ['Darrow Road : Old Woman Creek, OH', 41.364978, -82.504739],
                           ['Station 20 : Jobos Bay, Puerto Rico', 17.930317, -66.211472],
                           ['Station 19 : Jobos Bay, Puerto Rico', 17.942914, -66.228825],
                           ['Station 10 : Jobos Bay, Puerto Rico', 17.938611, -66.257736],
                           ['Station 9 : Jobos Bay, Puerto Rico', 17.943022, -66.238511],
                           ['Bangs Lake : Grand Bay, MS', 30.3571, -88.4629],
                           ['Bayou Heron : Grand Bay, MS', 30.4178, -88.4054],
                           ['Bayou Cumbest : Grand Bay, MS', 30.3836, -88.4364],
                           ['Point Aux Chenes Bay : Grand Bay, MS', 30.3486, -88.4185],
                           ['Fish River : Weeks Bay, AL', 30.4162, -87.8228],
                           ['Middle Bay : Weeks Bay, AL', 30.3961, -87.8335],
                           ['Magnolia River : Weeks Bay, AL', 30.39, -87.8177],
                           ['Weeks Bay : Weeks Bay, AL', 30.3808, -87.832],
                           ['East Bay Bottom : Apalachicola, FL', 29.7858, -84.8752],
                           ['Dry Bar : Apalachicola, FL', 29.6747, -85.0583],
                           ['Cat Point : Apalachicola, FL', 29.7021, -84.8802],
                           ['East Bay Surface : Apalachicola, FL', 29.7858, -84.8752],
                           ['Lower Henderson Creek : Rookery Bay, FL', 26.0257, -81.7332],
                           ['Middle Blackwater River : Rookery Bay, FL', 25.9343, -81.5946],
                           ['Faka Union Bay : Rookery Bay, FL', 25.9005, -81.5159],
                           ['Faka Hatchee Bay : Rookery Bay, FL', 25.8922, -81.477],
                           ['Pellicer Creek : Guana Tolomato Matanzas, FL', 29.667071, -81.257403],
                           ['Pine Island : Guana Tolomato Matanzas, FL', 30.050857, -81.367465],
                           ['Fort Matanzas : Guana Tolomato Matanzas, FL', 29.737041, -81.245953],
                           ['San Sebastian : Guana Tolomato Matanzas, FL', 29.868851, -81.307428],
                           ['Hunt Dock : Sapelo Island, GA', 31.4786, -81.2731],
                           ['Lower Duplin : Sapelo Island, GA', 31.417942, -81.296047],
                           ['Cabretta Creek : Sapelo Island, GA', 31.4437, -81.2399],
                           ['Dean Creek : Sapelo Island, GA', 31.3896, -81.2789],
                           ['St. Pierre : ACE Basin, SC', 32.5279, -80.3615],
                           ['Mosquito Creek : ACE Basin, SC', 32.5558, -80.438],
                           ['Fishing Creek : ACE Basin, SC', 32.6358, -80.3655],
                           ['Oyster Landing : North Inlet Winyah Bay, SC', 33.3493511, -79.1888819],
                           ['Debidue Creek : North Inlet Winyah Bay, SC', 33.3601486, -79.1674572],
                           ['Clambank : North Inlet Winyah Bay, SC', 33.3338636, -79.1930411],
                           ['Thousand Acre : North Inlet Winyah Bay, SC', 33.2991461, -79.2560564],
                           ['Research Creek : North Carolina, NC', 34.156, -77.8499],
                           ["Zeke's Basin : North Carolina, NC", 33.9547, -77.935],
                           ['Loosin Creek : North Carolina, NC', 34.1722, -77.8328],
                           ['East Cribbing : North Carolina, NC', 33.9399, -77.9411],
                           ['Sweethall : Chesapeake Bay, VA', 37.57138, -76.88424],
                           ['Goodwin Island : Chesapeake Bay, VA', 37.215796, -76.392675],
                           ['Claybank : Chesapeake Bay, VA', 37.346665, -76.611263],
                           ['Taskinas Creek : Chesapeake Bay, VA', 37.414986, -76.71442],
                           ['Otter Point Creek : Chesapeake Bay, MD', 39.4507, -76.2746],
                           ['Railroad : Chesapeake Bay, MD', 38.7813, -76.7137],
                           ['Mataponi Creek : Chesapeake Bay, MD', 38.7433, -76.7074],
                           ['Iron Pot Landing : Chesapeake Bay, MD', 38.796, -76.7208],
                           ['Scotton Landing : Delaware, DE', 39.08498, -75.46058],
                           ['Division Street : Delaware, DE', 39.1637, -75.5191],
                           ['Blackbird Landing : Delaware, DE', 39.38876, -75.636],
                           ['Lebanon Landing : Delaware, DE', 39.1144, -75.4992],
                           ['Chestnut Neck : Jacques Cousteau, NJ', 39.5479, -74.4608],
                           ['Buoy 126 : Jacques Cousteau, NJ', 39.5079, -74.3385],
                           ['Lower Bank : Jacques Cousteau, NJ', 39.5937, -74.5515],
                           ['Tivoli North Bay : Hudson River, NY', 42.0365457, -73.925324],
                           ['Saw Kill : Hudson River, NY', 42.0171722, -73.9149611],
                           ['Stony Creek : Hudson River, NY', 42.0463, -73.9108],
                           ['Tivoli South Bay : Hudson River, NY', 42.0270378, -73.9259569],
                           ['T-Wharf Bottom : Narragansett Bay, RI', 41.578361, -71.321125],
                           ['T-Wharf Surface : Narragansett Bay, RI', 41.578361, -71.321125],
                           ['Nag Creek : Narragansett Bay, RI', 41.62485, -71.324283],
                           ['Potters Cove : Narragansett Bay, RI', 41.64055, -71.340881],
                           ['Menauhant : Wquoit Bay, MA', 41.5526, -70.5485],
                           ['Childs River : Wquoit Bay, MA', 41.5798, -70.5309],
                           ['Metoxit Point : Wquoit Bay, MA', 41.5689, -70.5216],
                           ['Sage Lot : Wquoit Bay, MA', 41.5542, -70.5102],
                           ['Oyster River : Great Bay, NH', 43.134, -70.911],
                           ['Lamprey River : Great Bay, NH', 43.08, -70.9344],
                           ['Great Bay : Great Bay, NH', 43.0921, -70.8642],
                           ['Squamscott River : Great Bay, NH', 43.052403, -70.911811],
                           ['Inlet : Wells, ME', 43.320089, -70.563442],
                           ['Skinner Mill : Wells, ME', 43.344711, -70.549217],
                           ['Head of Tide : Wells, ME', 43.298347, -70.587094],
                           ['Little River Mout : Wells, ME', 43.340153, -70.540603]
                         ];

    var homemap = new google.maps.Map(document.getElementById('homemap'), {
      zoom: 4,
      center: new google.maps.LatLng(39.8282, -98.5795),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var infowindow = new google.maps.InfoWindow();
 google.maps.event.trigger(homemap, 'resize');
    var marker, i;

    for (i = 0; i < geolocations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(geolocations[i][1], geolocations[i][2]),
        map: homemap
      });
 google.maps.event.trigger(homemap, 'resize');
      google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
        return function() {
          infowindow.setContent(geolocations[i][0]);
          infowindow.open(homemap, marker);
          google.maps.event.trigger(homemap, 'resize');
        }
      })(marker, i));
    }


                    </script>
                </div>

            </div>
        </div>
        <div class="w3-panel">
            <div class="w3-row-padding" style="margin:0 -16px">

                <div class="w3-twothird">
                    <h5>Feeds</h5>
                    <table class="w3-table w3-striped w3-white">
                        <tr>
                            <td><i class="fa fa-feed w3-text-blue w3-large"></i></td>
                            <td>National Oceanic and Atmospheric Administration</td>
                            <td><i><a href="http://www.noaa.gov/" target="_blank"> visit</a></i></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-feed w3-text-red w3-large"></i></td>
                            <td>U.S. Geological Survey</td>
                            <td><i><a href="https://www.usgs.gov/" target="_blank"> visit</a></i></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-feed w3-text-blue w3-large"></i></td>
                            <td>Center for Operational Oceanographic Products and Services</td>
                            <td><i><a href="http://oceanservice.noaa.gov/outreach/pdfs/about_coops.pdf" target="_blank">
                                visit</a></i></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-feed w3-text-red w3-large"></i></td>
                            <td>National Data Buoy Center</td>
                            <td><i><a href="http://www.ndbc.noaa.gov/" target="_blank"> visit</a></i></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <hr>

        <!-- Footer
        <footer class="w3-container w3-padding-16 w3-light-grey">
          <h4>Quality Assurance Platform</h4>
          <p>Developed by <a href="https://sjsu.edu" target="_blank">SJSU</a></p>
        </footer>-->

        <!-- End page content -->
    </div><!--Home Panel End-->
    <div id="searchpanel" style="width:100%; display:none;">

        <div id="searchtemplate">
            <div class="w3-panel">
                <div class="w3-row-padding" style="margin:0 -16px">
                    <div class="w3-twothird">
                        <h5>Criteria</h5>
                        <table class="w3-table ">
                            <tr>
                                <td>
                                    Region
                                </td>
                                <td>
                                    <select id="dropdownregion" style="width: 200px;"></select>
                                </td>
                                <td>
                                    Station
                                </td>
                                <td>
                                    <select id="dropdownstation" style="width: 200px;"> </select>
                                    <input type="text" id="txtOtherStation" class="k-input hide"
                                           placeholder="Enter Station Name">
                                </td>

                            </tr>
                            <tr>
                                <td>From</td>
                                <td><input id="fromdatepicker" style="width: 200px"/></td>
                                <td>To</td>
                                <td><input id="todatepicker" style="width: 200px"/></td>
                            </tr>
                            <tr>
                                <td colspan="4"><input id="btnSearch" value="Search" type="button"></td>
                            </tr>
                        </table>


                    </div>

                </div>
            </div>
        </div>
        <div class="w3-panel">
            <div class="w3-row-padding" style="margin:0 -16px">
                <div class="w3-one">
                    <h5>Result</h5>
                    <div id="grid"></div>

                </div>
            </div>
        </div>


    </div><!--Search Panel End-->
    <div id="datainputpanel" style="display: none;">

        <div class="w3-panel">
            <div class="w3-row-padding" style="margin:0 -16px">
                <div class="w3-twothird">
                    <h5>Input Wizard</h5>

                    <!-- Smart Wizard -->
                    <div id="wizard" class="swMain">

                        <div>
                            <h3 class="StepTitle">Data Source</h3>
                            <div>
                                <section class="collectioncontainer">
                                    <div class="collectionleftpanel">
                                        <fieldset>
                                            <legend>Select Source</legend>
                                            <input type="radio" data-bind="checked: DiSourceValue" value="CSV"
                                                   name="source"> CSV
                                            <input type="radio" data-bind="checked: DiSourceValue" value="WebService"
                                                   name="source"> Web Service

                                        </fieldset>
                                        <div data-bind="visible: ShowCsvSource">
                                            <form id="frmcsvfile" method="post" enctype="multipart/form-data"
                                                  action="{{ url_for('upload') }}">
                                                <fieldset>
                                                    <legend>Upload your CSV File</legend>
                                                    <input type="file" name="csvfile" id="btncsvfile" accept=".csv"/>
                                                    <input type="hidden" data-bind="value: CsvFileName"
                                                           id="hdnFileName"/>
                                                </fieldset>
                                            </form>
                                        </div>
                                        -- Or --
                                        <div data-bind="visible: ShowWsSource">Get Data From Database/Web Service

                                        </div>
                                        <i>Note:Based on below criteria, processor will search data into database. If
                                            data is not
                                            aviailable, then data will get retrieve via web service.</i>

                                        <table class="w3-table w3-striped w3-white">
                                            <tr>
                                                <td>Region</td>
                                                <td>
                                                    <select id="dropdowndatainputregion" name="region">
                                                    </select></td>
                                                <td>Station</td>
                                                <td><select id="dropdowndatainputstation" name="station"></select>
                                                    <input type="text" id="txtInputOtherStation" class="k-input hide">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Start Date</td>
                                                <td><input id="datepickerdatainputfrom" type="text"></input></td>
                                                <td>End Date</td>
                                                <td><input id="datepickerdatainputto" type="text"></input></td>
                                            </tr>
                                        </table>


                                    </div>

                                </section>
                            </div>


                        </div>
                        <div>
                            <h2 class="StepTitle">Cleaning</h2>
                            <p>Do you want to perform data cleaning operation?
                            </p>
                            <p>
                                <input type="radio" class="w3-radio" value="true" data-bind="checked:IsRequiredClean"
                                       id="radperformcleaningYes"
                                       name="radperformcleaning"> Yes
                                <input type="radio" class="w3-radio" value="false" data-bind="checked: IsRequiredClean"
                                       id="radperformcleaningNo"
                                       name="radperformcleaning"> No
                            </p>
                            <p>
                                Some description will come here...
                            </p>
                        </div>
                        <div>
                            <h2 class="StepTitle">Apply Filter</h2>
                            <p>
                                <input type="checkbox" data-bind="checked: Completeness" class="w3-check"> Completeness
                                <input type="checkbox" data-bind="checked: Correctness" class="w3-check"> Correctness
                                <input type="checkbox" data-bind="checked: Timeliness" class="w3-check"> Timeliness
                                <input type="checkbox" data-bind="checked: Uniqueness" class="w3-check"> Uniqueness
                                <input type="checkbox" data-bind="checked: Validity" class="w3-check"> Validity
                                <input type="checkbox" data-bind="checked: Usability" class="w3-check"> Usability
                            </p>

                        </div>
                        <div>
                            <h2 class="StepTitle">Validation</h2>


                            <table class="w3-table w3-white">
                                <tr><td>Select Model Sub Type</td><td><input type="radio"  class="w3-radio" value="RegionBased" data-bind="checked:ModelBasedSubType"
                                       name="Region Based"> Region Based
                                <input type="radio"   class="w3-radio" value="StationBased" data-bind="checked:ModelBasedSubType"
                                       name="Station Based"> Station Based</td></tr>
                                <tr>
                                    <td>Is Monthly Validation?</td><td><input type="checkbox" class="w3-check" data-bind="checked:MonthlyValidation"></td>
                                     </tr><tr>
                                    <td>Enter Start Year</td><td><input type="text" class="k-input" data-bind="textInput:MonthStartDate"></td>
                                     </tr><tr><td>Enter End Year</td><td><input type="text" class="k-input" data-bind="textInput:MonthEndDate"></td>
                                </tr>

                                <tr>
                                    <td>Is Yearly Validation?</td><td><input type="checkbox"  class="w3-check" data-bind="checked:YearlyValidation"></td>
                                    </tr><tr> <td>Enter Start Year</td><td><input type="text" class="k-input" data-bind="textInput:StartYear"></td>
                                    </tr><tr> <td>Enter End Year</td><td><input type="text" class="k-input" data-bind="textInput:EndYear"></td>
                                </tr>
                            </table>

                        </div>
                    </div>
                    <!-- End SmartWizard Content -->
                </div>

            </div>
        </div>
    </div><!--Data i/p Panel End-->
    <div id="analysispanel" style="display: none;"> <!--Analysis Panel Start-->
        <div class="w3-panel">
            <div class="w3-row-padding" style="margin:0 -16px">
                <div class="w3-container  w3-padding-32">
                    <h5>Analysis and Report</h5>

                     <div class=" w3-row">
                        <div class="w3-container w3-third">
                            <div id="spidermap" style="min-width: 400px; max-width: 600px; height: 400px; margin: 0 auto"></div>
                        </div>

                    </div>

                    <div class=" w3-row">
                        <div class="w3-container w3-third">
                            <div id="monthlylinegraph" style="min-width: 400px; max-width: 600px; height: 400px; margin: 0 auto"></div>
                        </div>

                    </div>

                    <div class=" w3-row">
                        <div class="w3-container w3-third">
                            <div id="yearlylinegraph" style="min-width: 400px; max-width: 600px; height: 400px; margin: 0 auto"></div>
                        </div>

                    </div>
                </div>
            </div> <!--Analysis Panel End-->

        </div><!-- !PAGE CONTENT END! -->
    </div>
</div>
<div id="mainmodal" class="w3-modal">
    <div class="w3-modal-content">
        <div class="w3-container">
      <span onclick="document.getElementById('mainmodal').style.display='none'"
            class="w3-button w3-display-topright">&times;</span>

            <p><img src="static/images/loader.gif" class="w3-circle ">Searching..</p>
        </div>
    </div>
</div>
</body>
</html>
